<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meme Radar 백엔드 운영 가이드</title>
  <style>
    :root {
      --ink: #111827;
      --muted: #4b5563;
      --line: #d1d5db;
      --card: #ffffff;
      --bg: #f7fafc;
      --accent: #ea580c;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "SUIT", "Pretendard", "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      background: var(--bg);
      color: var(--ink);
      padding: 24px;
      line-height: 1.6;
    }
    main {
      max-width: 980px;
      margin: 0 auto;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 16px;
      overflow: hidden;
    }
    header {
      background: #111827;
      color: #f9fafb;
      padding: 24px;
    }
    header h1 { font-size: 1.7rem; margin-bottom: 8px; }
    header p { color: #d1d5db; }
    .content { padding: 20px; display: grid; gap: 14px; }
    section {
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 14px;
      background: #fff;
    }
    h2 { font-size: 1.05rem; margin-bottom: 8px; }
    ul { list-style: none; display: grid; gap: 6px; color: var(--muted); }
    li { padding-left: 14px; position: relative; }
    li::before { content: "•"; position: absolute; left: 0; color: var(--accent); }
    code {
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 1px 6px;
      font-family: Consolas, "Courier New", monospace;
      font-size: 0.92em;
      color: #111827;
    }
  </style>
</head>
<body>
  <main>
    <header>
      <h1>모바일 앱 백엔드 운영 가이드</h1>
      <p>웹사이트 배포 없이 앱 스토어 출시를 위한 API 서버 중심 설계</p>
    </header>

    <div class="content">
      <section>
        <h2>Cloud Run 고정값</h2>
        <ul>
          <li>프로젝트 ID: <code>meme-radar-kr-prod</code></li>
          <li>리전: <code>asia-northeast3</code> (서울)</li>
          <li>기본 구조: Cloud Run Service(API) + Cloud Run Job(수집) + Cloud Scheduler(10분)</li>
        </ul>
      </section>
      <section>
        <h2>목표 범위</h2>
        <ul>
          <li>앱은 UI만 담당, 데이터 수집/가공/랭킹 계산은 서버 전담</li>
          <li>서버는 JSON API만 제공: <code>/api/v1/snapshot</code>, <code>/api/health</code></li>
          <li>무료 공개 소스 기반 수집(Reddit 공개 JSON)</li>
          <li>10분 주기 서버 수집 + 캐시 유지(클라이언트 요청 시 즉시 응답)</li>
        </ul>
      </section>

      <section>
        <h2>데이터 소스(무료)</h2>
        <ul>
          <li>밈: <code>r/hanguk</code>, <code>r/korea</code>, <code>r/memes</code>, <code>r/dankmemes</code></li>
          <li>유행: <code>r/korea</code>, <code>r/hanguk</code>, <code>r/koreanfood</code>, <code>r/kbeauty</code>, <code>r/sneakers</code></li>
          <li>챌린지: <code>r/kpop</code>, <code>r/koreanvariety</code>, <code>r/TikTokCringe</code>, <code>r/dance</code></li>
          <li>한국어/한국 커뮤니티에 가중치 적용(로케일 점수)</li>
        </ul>
      </section>

      <section>
        <h2>로컬 운영 확인</h2>
        <ul>
          <li><code>node project/server.js</code></li>
          <li>스냅샷 확인: <code>curl "http://127.0.0.1:8787/api/v1/snapshot?period=today"</code></li>
          <li>상태 확인: <code>curl "http://127.0.0.1:8787/api/health"</code></li>
        </ul>
      </section>

      <section>
        <h2>랭킹 계산 방식</h2>
        <ul>
          <li>기본 점수: <code>ups + num_comments * 2</code></li>
          <li>기간 보정: <code>today/week/month/quarter</code> 가중치 + 시간 감쇠</li>
          <li>로케일 보정: 한글 제목/한국 관련 소스 가중치 추가</li>
          <li>카테고리별 상위 12개 반환, 상위 3개 배지 부여</li>
        </ul>
      </section>

      <section>
        <h2>운영 TODO</h2>
        <ul>
          <li>API 버전 고정: <code>/api/v1/snapshot</code></li>
          <li>DB 전환(SQLite -&gt; PostgreSQL)</li>
          <li>수집 워커 분리(API 프로세스와 독립)</li>
          <li>모니터링/알림, 재시도 정책, 장애 시 마지막 정상 데이터 유지</li>
        </ul>
      </section>
    </div>
  </main>
</body>
</html>



