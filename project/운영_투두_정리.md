# Meme 프로젝트 운영 TODO (Cloud Run 기준)

## 고정 운영 값
- PROJECT_ID: `meme-radar-kr-prod`
- REGION: `asia-northeast3` (서울)
- 서비스 형태: Cloud Run Service(API) + Cloud Run Job(수집) + Cloud Scheduler(10분)

## 1) 아키텍처 확정
- [ ] Cloud SQL(PostgreSQL) 영구 저장소 확정
- [ ] Secret Manager 사용 정책 확정(DB 계정/비밀번호)

## 2) 코드 구조 변경
- [ ] `project/server.js`를 API 전용으로 유지 (`/api/v1/snapshot`, `/api/health`)
- [ ] 수집 로직을 Job 전용 파일로 분리 (예: `project/collector.js`)
- [ ] 앱에서 API Base URL을 환경변수로 분리

## 3) DB 설계/적용
- [ ] 테이블 생성: `items`, `snapshots`, `sources`, `job_runs`
- [ ] 인덱스 생성: `category`, `period`, `updated_at`
- [ ] "수집 실패 시 마지막 정상 데이터 반환" 쿼리/로직 구현

## 4) 배포 준비
- [ ] `Dockerfile`/`.dockerignore` 작성
- [ ] Cloud Run 배포 스크립트 정리
- [ ] Job + Scheduler 연결

## 5) 운영 안정화
- [ ] Cloud Logging/Monitoring 알림 설정
- [ ] 장애 대응: 이전 Revision 롤백 절차 문서화
- [ ] API 스키마 고정(v1), 변경 시 버전 업 규칙 명시

## 6) QA 체크
- [ ] `/api/health` 200 확인
- [ ] `/api/v1/snapshot?period=today` 200 확인
- [ ] 10분 주기 갱신 동작 확인
- [ ] 한국어/한국 관련 소스 가중치 결과 확인

## 설치 상태(대화 기준)
- 설치 확인: Oracle DB, SQL Developer, Node.js, Git, Docker Desktop, Postman, Google Cloud SDK
- 선택 도구: DBeaver/pgAdmin (PostgreSQL 운영 시)
